# ============================================================================
# MINECRAFT ECOSYSTEM MOD - GENERALIZED BEHAVIOR TEMPLATE
# Version: 2.0
# Mob: Pig (minecraft:pig)
# ============================================================================

# ============================================================================
# SYSTEM 1: IDENTITY & CLASSIFICATION
# ============================================================================

identity:
  mob_id: "minecraft:pig"
  display_name: "Pig"

  # Ecological classification
  classification:
    category: "PASSIVE"
    trophic_level: "PRIMARY_CONSUMER"
    diet_type: "OMNIVORE"
    social_type: "HERD"
    activity_pattern: "DIURNAL"

  # Reference information
  reference:
    real_world_analog: "Domestic pig (Sus scrofa domesticus)"
    ecological_role: "Primary consumer that converts plant matter into biomass for predators; helps with soil turnover through rooting behavior"

  # Tags for system filtering
  tags: ["farmable", "rideable", "saddleable", "lightning_transformable"]


# ============================================================================
# SYSTEM 2: PHYSICAL ATTRIBUTES
# ============================================================================

physical:
  # Health
  health:
    base: 10                    # 5 hearts = 10 HP
    baby_multiplier: 0.5

  # Size (affects hitbox and various calculations)
  size:
    width: 0.9
    height: 0.9
    baby_scale: 0.38            # Piglets are 0.45 blocks tall/wide

  # Biomass - abstract unit for food chain calculations
  biomass:
    adult: 120                  # Medium-sized food animal
    baby: 30
    transfer_efficiency: 0.1    # 10% energy transfer up food chain

  # Movement capabilities
  movement:
    speeds:
      walk: 0.25                # Blocks per tick
      run: 0.35                 # Moderate sprint speed
      swim: 0.15
      fly: 0.0                  # Cannot fly
      climb: 0.0                # Cannot climb

    capabilities:
      can_swim: true
      can_jump: true
      jump_height: 1.0
      avoids_water: false
      avoids_cliffs: true
      cliff_threshold: 3        # Won't jump off heights greater than 3 blocks

    # Speed modifiers applied conditionally
    conditional_modifiers:
      baby: 0.7
      elderly: 0.8
      injured: 0.7              # Below 30% health
      hungry: 0.85              # Below 20% food
      fleeing: 1.4              # When running from damage
      hunting: 1.0              # N/A - not a hunter
      carrying_offspring: 1.0
      in_water_nonaquatic: 0.5


# ============================================================================
# SYSTEM 3: INTERNAL STATE TRACKING
# ============================================================================

internal_state:
  # Hunger system
  hunger:
    enabled: true
    max_value: 100
    starting_value: 75
    decay_rate: 0.015           # Slower decay for farm animals

    # Thresholds that trigger behaviors
    thresholds:
      satiated: 80              # Above this: won't prioritize food
      hungry: 50                # Below this: actively seek food
      very_hungry: 25           # Below this: take risks for food
      starving: 10              # Below this: desperate behaviors

    # Starvation damage
    starvation:
      damage_threshold: 5       # Start taking damage below this
      damage_amount: 1          # Hearts per interval
      damage_interval: 240      # Ticks between damage

  # Thirst system (optional - set enabled: false to disable)
  thirst:
    enabled: true
    max_value: 100
    starting_value: 100
    decay_rate: 0.015             # Pigs need regular water access
    thresholds:
      satisfied: 75
      thirsty: 45
      dehydrated: 15


  # Body condition (overall fitness - affects breeding, survival)
  condition:
    enabled: true
    max_value: 100
    starting_value: 70

    # Condition changes based on food intake vs needs
    gain_when_satiated: 0.012   # Per tick when hunger > satiated
    loss_when_hungry: 0.02      # Per tick when hunger < hungry
    loss_when_starving: 0.1

    thresholds:
      excellent: 85             # Can breed, high survival
      good: 65                  # Can breed
      fair: 45                  # Cannot breed
      poor: 25                  # Weakened
      critical: 10              # Near death

  # Energy/Stamina (for actions like sprinting, hunting)
  energy:
    enabled: true
    max_value: 100
    recovery_rate: 0.4          # Per tick when resting

    costs:
      sprinting: 0.25           # Per tick
      hunting: 0.0
      fleeing: 0.35
      flying: 0.0
      swimming: 0.25

  # Age tracking
  age:
    enabled: true
    baby_duration: 24000        # Ticks as baby (20 minutes)
    maturity_age: 24000         # When can breed
    elderly_age: null           # null = no old age
    max_age: null               # null = immortal (no natural death)

  # Social needs (for social species)
  social:
    enabled: true               # Pigs are social animals
    max_value: 100
    decay_rate: 0.008           # When alone
    recovery_rate: 0.15         # When with group
    loneliness_threshold: 35    # Below this: seek group


# ============================================================================
# SYSTEM 4: TEMPORAL BEHAVIOR RULES
# ============================================================================

temporal:
  # Daily cycle
  daily_cycle:
    # Activity levels by time of day
    # Minecraft day: 0=dawn, 6000=noon, 12000=dusk, 18000=midnight
    schedule:
      - time: [0, 6000]         # Dawn to noon
        activity: 1.0           # Fully active
        label: "morning"
      - time: [6000, 12000]     # Noon to dusk
        activity: 0.9
        label: "afternoon"
      - time: [12000, 13500]    # Dusk
        activity: 0.7
        label: "dusk"
      - time: [13500, 22500]    # Night
        activity: 0.3           # Reduced but not sleeping
        label: "night"
      - time: [22500, 24000]    # Pre-dawn
        activity: 0.5
        label: "pre_dawn"

    # What "low activity" means
    low_activity_behavior:
      action: "rest"            # REST | SLEEP | HIDE | REDUCED_WANDER
      seek_shelter: false
      reduced_awareness: true   # Easier to sneak up on
      awareness_multiplier: 0.6

  # Weather responses
  weather:
    rain:
      activity_multiplier: 0.7
      seek_shelter: false
      shelter_priority: 2
    thunder:
      activity_multiplier: 0.5
      seek_shelter: false
      panic_chance: 0.15        # Slight panic from loud noises
    snow:
      activity_multiplier: 0.6
      seek_shelter: false
    clear:
      activity_multiplier: 1.0

  # Seasonal behaviors (requires season system)
  seasons:
    enabled: false

  # Moon phases (optional)
  lunar:
    enabled: false


# ============================================================================
# SYSTEM 5: SPATIAL BEHAVIOR RULES
# ============================================================================

spatial:
  # Habitat requirements
  habitat:
    biomes:
      allowed: []               # Most biomes allowed
      preferred: ["plains", "forest", "birch_forest", "oak_forest", "savanna"]
      forbidden: ["snowy_plains", "meadow", "mangrove_swamp", "pale_garden"]

    altitude:
      min: -64
      max: 320
      preferred: [62, 90]       # Ground level preference

    required_nearby:            # Must have these within range to spawn/stay
      - feature: "grass"
        max_distance: 16
        reason: "Food source"

  # Territory system
  territory:
    enabled: false
    size: 0
    defends: false
    marks: false
    overlap_tolerance: 1.0
    defense_against: []

  # Home range (non-defended area of activity)
  home_range:
    enabled: true
    radius: 48
    has_home_point: false       # Returns to specific location
    home_type: null             # No specific home type

  # Shelter requirements
  shelter:
    needs_shelter: false
    shelter_uses: []

    valid_shelters: []

  # Location-triggered behaviors
  location_triggers:
    enabled: false


# ============================================================================
# SYSTEM 6: DIET & FORAGING
# ============================================================================

diet:
  # Food sources categorized by preference
  food_sources:
    primary:
      - type: "ITEM"
        target: "minecraft:carrot"
        nutrition: 35
        saturation: 8000
        consumption_time: 30
        method: "PICKUP"
        world_effect:
          action: "NONE"
        condition_gain: 8
        health_effect: 0

      - type: "ITEM"
        target: "minecraft:potato"
        nutrition: 30
        saturation: 7000
        consumption_time: 30
        method: "PICKUP"
        world_effect:
          action: "NONE"
        condition_gain: 7
        health_effect: 0

      - type: "ITEM"
        target: "minecraft:beetroot"
        nutrition: 25
        saturation: 6000
        consumption_time: 30
        method: "PICKUP"
        world_effect:
          action: "NONE"
        condition_gain: 6
        health_effect: 0

    secondary:
      - type: "BLOCK"
        target: "minecraft:short_grass"
        nutrition: 15
        saturation: 3000
        consumption_time: 60
        method: "GRAZE"
        world_effect:
          action: "DESTROY"
        condition_gain: 3
        health_effect: 0

      - type: "BLOCK"
        target: "minecraft:tall_grass"
        nutrition: 20
        saturation: 4000
        consumption_time: 80
        method: "GRAZE"
        world_effect:
          action: "DESTROY"
        condition_gain: 4
        health_effect: 0

    emergency:
      - type: "DROPPED_ITEM"
        target: "#minecraft:seeds"
        nutrition: 10
        saturation: 2000
        consumption_time: 20
        method: "PICKUP"
        world_effect:
          action: "NONE"
        condition_gain: 2
        health_effect: 0

  # Foraging behavior
  foraging:
    search_radius:
      base: 16
      when_hungry: 24
      when_starving: 40
    search_interval: 160        # Ticks between searches

    # Memory system
    memory:
      remembers_locations: true
      memory_duration: 18000
      remembers_depleted: false
      avoids_depleted_for: 0
      shares_with_group: true

    # Sustainable foraging
    sustainability:
      enabled: false            # Pigs will eat grass completely
      dont_deplete_fully: false
      minimum_remaining: 0
      patch_return_delay: 0


# ============================================================================
# SYSTEM 7: PREDATION
# ============================================================================

predation:
  # === AS PREDATOR ===
  as_predator:
    enabled: false

  # === AS PREY ===
  as_prey:
    enabled: true

    predators: []               # No natural predators in vanilla, but can be added by mod

    # Default predator response
    default_response:
      detection_range: 16
      response_type: "FLEE"     # FLEE | FREEZE | FIGHT | HIDE | ALARM | MOB

      flee:
        speed_multiplier: 1.4
        flee_distance: 32
        flee_toward: "RANDOM"   # SAFETY | WATER | GROUP | SHELTER | RANDOM
        zigzag: false

      freeze:
        duration: [0, 0]
        break_on_approach: false
        break_distance: 0

      alarm:
        gives_alarm: false
        alarm_radius: 0
        alarm_triggers_group_flee: false

    # All-clear conditions
    all_clear:
      predator_distance: 48
      time_since_seen: 300


# ============================================================================
# SYSTEM 8: REPRODUCTION
# ============================================================================

reproduction:
  enabled: true
  method: "SEXUAL"              # SEXUAL | ASEXUAL | PARTHENOGENESIS

  # === BREEDING REQUIREMENTS ===
  requirements:
    # Physical requirements
    min_age: 24000              # Must be adult
    max_age: null               # null = no menopause
    min_health: 0.7             # 70% health
    min_condition: 60           # "Good" body condition
    min_hunger: 55              # Must be moderately well-fed

    # Recent feeding
    recent_food:
      enabled: true
      time_window: 12000
      meals_required: 2

    # Environmental requirements
    environment:
      near_water: false
      water_max_distance: 0
      required_biomes: []
      required_blocks_nearby: []
      min_light: 0
      max_light: 15

    # Shelter requirement
    requires_shelter: false
    shelter_type: null

    # Temporal requirements
    time_of_day: null           # Any time
    season: null                # Any season
    weather: null               # Any weather

    # Social requirements
    mate_required: true
    mate_max_distance: 16

  # === POPULATION DENSITY EFFECTS ===
  density_effects:
    enabled: true
    check_radius: 48

    # Breeding desire multipliers based on local population
    density_curve:
      - count: 2
        multiplier: 1.4         # Few nearby = breed more
      - count: 6
        multiplier: 1.0         # Normal
      - count: 12
        multiplier: 0.6         # Getting crowded
      - count: 20
        multiplier: 0.2         # Very crowded
      - count: 30
        multiplier: 0.0         # Breeding suppressed

  # === MATE SELECTION ===
  mate_selection:
    search_radius: 24
    search_interval: 800

    preferences:
      prefer_healthy: true
      prefer_good_condition: true
      avoid_relatives: false    # Farm animals don't avoid relatives
      relative_recognition_duration: 0

    courtship:
      enabled: false
      behavior: null
      duration: 0
      can_reject: false
      rejection_cooldown: 0

  # === BREEDING PROCESS ===
  breeding:
    cooldown: 6000              # 5 minutes between breeding attempts

    gestation:
      type: "INSTANT"           # INSTANT | LIVE_BIRTH | EGG
      duration: 0               # Ticks (for LIVE_BIRTH/EGG)
      behavior_during: []

    birth:
      offspring_count: [1, 1]   # Single piglet
      condition_affects_count: false
      location_requirement: null

  # === PARENTAL CARE ===
  parental_care:
    enabled: true
    duration: 12000             # Until offspring somewhat independent

    behaviors:
      protects_offspring: false # Pigs don't actively protect
      protection_aggression: 1.0
      protection_radius: 0

      feeds_offspring: false
      teaches_offspring: false
      carries_offspring: false

    offspring_behavior:
      follows_parent: true
      follow_distance: 3
      max_separation: 12
      separation_distress: false


# ============================================================================
# SYSTEM 9: SOCIAL BEHAVIOR
# ============================================================================

social:
  # Group structure
  group:
    type: "HERD"
    size:
      min: 2
      optimal: 4
      max: 8

    composition:
      mixed_sex: true
      mixed_age: true
      family_based: false

    leadership:
      has_leader: false
      leader_selection: null
      follow_leader: false

  # Herd/flock movement
  herd_movement:
    enabled: true
    cohesion_radius: 10
    separation_distance: 1.5
    alignment: true             # Move same direction

  # Communication
  communication:
    alarm_calls:
      enabled: false
      types: []
      radius: 0
      chain_calling: false

    contact_calls:
      enabled: false
      when: []
      radius: 0

    mating_calls:
      enabled: false
      radius: 0
      time: null

  # Social behaviors list
  behaviors:
    greeting: false
    allogrooming: false
    play: false
    huddling: false
    dominance_hierarchy: false

  # Group benefits
  group_benefits:
    predator_detection_bonus: 0.05   # Small per group member
    foraging_efficiency_bonus: 0.0
    thermoregulation_bonus: 0.0


# ============================================================================
# SYSTEM 10: ENVIRONMENTAL IMPACT
# ============================================================================

environmental_impact:
  # Terrain modifications
  terrain:
    enabled: true
    actions:
      - trigger: "foraging"
        action: "CONVERT"
        target_blocks: ["minecraft:grass_block"]
        result_block: "minecraft:dirt"
        frequency: 0.02         # 2% chance per foraging tick
        radius: 1

  # Ecosystem services
  ecosystem_services:
    seed_dispersal:
      enabled: false
      seeds: []
      method: null
      dispersal_radius: 0

    pollination:
      enabled: false
      flowers: []
      radius: 0

    nutrient_cycling:
      enabled: true
      fertilizes: true          # Pigs produce manure
      fertilize_radius: 2

    decomposition:
      enabled: false
      decomposes: []
      result: null

  # Environmental responses
  responses:
    drinking:
      enabled: false            # Pigs don't explicitly drink
      frequency: 0
      water_blocks: []
      duration: 0
      congregates: false

    temperature:
      heat_seek_shade: false
      heat_seek_water: true     # Pigs cool off in water
      cold_seek_shelter: false
      cold_huddling: false


# ============================================================================
# SYSTEM 11: POPULATION DYNAMICS
# ============================================================================

population:
  # Spawning rules
  spawning:
    weight: 10                  # Normal spawn frequency
    group_size: [3, 4]          # Spawn in small groups

    conditions:
      blocks: ["minecraft:grass_block"]
      biomes: []                # From habitat
      light: [9, 15]            # Daytime spawning
      altitude: null            # From habitat
      time: null                # Any time
      weather: null

  # Carrying capacity
  carrying_capacity:
    method: "SOFT_CAP"          # HARD_CAP | SOFT_CAP | RESOURCE_BASED

    caps:
      per_chunk: 6              # Moderate density
      regional: null

    # Over-capacity effects
    over_capacity:
      - threshold: 1.2
        effects: ["reduced_breeding"]
      - threshold: 1.5
        effects: ["reduced_breeding", "dispersal"]
      - threshold: 2.0
        effects: ["starvation"]

  # Dispersal
  dispersal:
    enabled: false
    triggers: []
    distance: [0, 0]

  # Natural mortality
  mortality:
    old_age:
      enabled: false
      max_age: null
    starvation:
      enabled: true             # From hunger system
    disease:
      enabled: false
      base_chance: 0.0
      crowding_multiplier: 0.0


# ============================================================================
# SYSTEM 12: PLAYER INTERACTION
# ============================================================================

player_interaction:
  base_attitude: "FEARFUL"      # PASSIVE | NEUTRAL | HOSTILE | FEARFUL

  # Fear/approach distances
  distances:
    detection: 24
    caution: 12
    flee: 6

  # Habituation (getting used to players)
  habituation:
    enabled: true
    rate: 0.02                  # Per peaceful encounter
    decay: 0.0005               # Per tick without player
    max_habituation: 1.0        # Can become fully habituated through feeding
    habituated_flee_distance: 0 # Won't flee when habituated

  # Taming
  taming:
    enabled: false              # Pigs cannot be tamed
    items: []
    chance: 0.0
    requires_habituation: false

  # Player breeding
  player_breeding:
    enabled: true
    items: ["minecraft:carrot", "minecraft:potato", "minecraft:beetroot"]
    bypasses_conditions: true   # Player breeding is easier

  # Drops
  drops:
    on_death:
      - item: "minecraft:porkchop"
        count: [1, 3]
        chance: 1.0
        requires_player_kill: false
        looting_bonus: 1

    on_interaction: []

  # Special interactions
  interactions:
    - action: "saddle"
      item: "minecraft:saddle"
      result: "saddled"
      description: "Right-click with saddle to make pig rideable"

    - action: "remove_saddle"
      item: "minecraft:shears"
      result: "unsaddled"
      description: "Right-click saddled pig with shears to retrieve saddle"

    - action: "attract"
      item: "minecraft:carrot_on_a_stick"
      result: "follow"
      description: "Pigs follow players holding carrot on a stick within 6 blocks"


# ============================================================================
# SYSTEM 13: AESTHETICS & PERSONALITY
# ============================================================================

aesthetics:
  # Sounds
  sounds:
    ambient: "entity.pig.ambient"
    hurt: "entity.pig.hurt"
    death: "entity.pig.death"
    baby: "entity.pig.ambient"
    alarm: null
    mating: null
    eating: "entity.generic.eat"

  # Idle animations
  idle_behaviors:
    enabled: true
    behaviors:
      - behavior: "sniff_ground"
        frequency: 400
        trigger: "random"
      - behavior: "look_around"
        frequency: 300
        trigger: "random"
      - behavior: "ear_wiggle"
        frequency: 500
        trigger: "random"

  # Individual variation
  personality_traits:
    boldness:
      base: 0.4               # Naturally cautious
      variation: 0.3
    activity:
      base: 0.6               # Moderately active
      variation: 0.2
    sociability:
      base: 0.7               # Social animals
      variation: 0.2


# ============================================================================
# SYSTEM 14: AI GOAL PRIORITY FRAMEWORK
# ============================================================================

ai_priority_framework:
  # Survival (highest priority)
  survival:
    breathe: 0
    escape_danger: 1
    flee_predator: 2

  # Physiological needs
  physiological:
    critical_health: 3
    drink_water: 4
    eat_food: 5
    find_shelter: 6

  # Reproduction
  reproduction:
    care_for_offspring: 7
    breed: 8
    find_mate: 9

  # Social
  social:
    group_cohesion: 10
    social_interaction: 11

  # Hunting (for predators)
  hunting:
    hunt_prey: 99             # N/A for pigs

  # Location behaviors
  location:
    location_triggered: 13
    territory_patrol: 14

  # Default behaviors
  default:
    wander: 15
    idle: 16
    rest: 17


# ============================================================================
# SYSTEM 15: UNIQUE BEHAVIOR FRAMEWORK
# ============================================================================

unique_behavior_template:
  # Pigs have unique behaviors defined in unique_registry.yaml
  structure:
    name: ""
    description: ""

    triggers:
      - type: ""
        conditions: {}

    requirements:
      all_of: []
      any_of: []
      none_of: []

    actions: []

    effects:
      on_self: []
      on_others: []
      on_world: []

    priority: 10
    duration: null
    cooldown: null
    interruptible: true
